(()=>{"use strict";let e=!1;class t{constructor({selector:e,pattern:t,method:n}){this.form=document.querySelector(e),this.pattern=t,this.method=n,this.elementsForm=[...this.form.elements].filter((e=>"button"!==e.tagName.toLowerCase()&&"button"!==e.type&&"hidden"!==e.type)),this.error=new Set}init(){this.applyStyle(),this.setPattern(),this.elementsForm.forEach((e=>e.addEventListener("change",this.checkIt.bind(this)))),this.form.addEventListener("submit",(t=>{if(this.elementsForm.forEach((e=>this.checkIt({target:e}))),this.error.size)return t.preventDefault(),void(e=!0);e=!1,this.elementsForm.forEach((e=>e.classList.remove("success")))}))}isValid(e){const t={notEmpty:e=>""!==e.value.trim(),pattern:(e,t)=>t.test(e.value)};if(!this.method)return console.warn("Передайте методы"),!0;{const n=this.method[e.id];if(n)return n.every((n=>t[n[0]](e,this.pattern[n[1]])))}}checkIt(e){const t=e.target;this.isValid(t)?(this.showSuccess(t),this.error.delete(t)):(this.showError(t),this.error.add(t))}showError(e){if(e.classList.remove("success"),e.classList.add("error"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error"))return;const t=document.createElement("div");t.textContent="Ошибка в этом поле",t.classList.add("validator-error"),e.insertAdjacentElement("afterend",t)}showSuccess(e){e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")&&e.nextElementSibling.remove()}applyStyle(){const e=document.createElement("style");e.textContent="\n        input.success {\n            border: 2px solid green !important;\n        }\n        input.error {\n            border: 2px solid red !important;\n        }\n        .validator-error {\n            font-size: 14px !important;\n            color: red !important;\n            font-family: sans-serif !important;\n        }\n        ",document.head.appendChild(e)}setPattern(){this.pattern.phone||(this.pattern.phone=/^\+?[78]([-()]*\d){10}$/),this.pattern.email||(this.pattern.email=/^\w+@+\w+\.\w{2,}$/)}}const n=new t({selector:"#form1",pattern:{name:/[A-Za-zА-Яа-яЁё]{2,}/,phone:/^((8|\+7)[- ]?)?(\(?\d{3}\)?[- ]?)?[\d\- ]{7,16}$/},method:{"form1-name":[["notEmpty"],["pattern","name"]],"form1-phone":[["notEmpty"],["pattern","phone"]]}}),o=new t({selector:"#form2",pattern:{name:/[A-Za-zА-Яа-яЁё]{2,}/,phone:/^((8|\+7)[- ]?)?(\(?\d{3}\)?[- ]?)?[\d\- ]{7,16}$/},method:{"form2-name":[["notEmpty"],["pattern","name"]],"form2-phone":[["notEmpty"],["pattern","phone"]]}});n.init(),o.init();const s=t=>{const n=[...t.elements].filter((e=>"button"!==e.tagName.toLowerCase()&&"button"!==e.type));n.forEach((e=>{e.addEventListener("input",(()=>{"fio"===e.name?e.value=e.value.replace(/[^а-яё a-z]/gi,""):"phone"===e.name&&(e.value=e.value.replace(/[^0-9()+-]/,""))}))}));const o=document.createElement("div");o.style.cssText="font-size: 1.5rem; color: #000 !important;",t.addEventListener("submit",(s=>{if(s.preventDefault(),!e){t.querySelector("button").disabled="true",t.appendChild(o),o.textContent="Загрузка...";const e=new FormData(t),s={};for(const t of e.entries())s[t[0]]=t[1];n.filter((e=>"Балконы"===e.value))&&(s.total=document.getElementById("calc-total").value),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(s).then((e=>{if(200!==e.status)throw new Error("Status network not 200");o.textContent="Спасибо! Мы скоро с вами свяжимся!",setTimeout((()=>{o.remove(),t.querySelector("button").removeAttribute("disabled")}),3e3),t.reset()})).catch((e=>{o.textContent="Что то пошло не так...",setTimeout((()=>{o.remove(),t.querySelector("button").removeAttribute("disabled")}),3e3),t.reset()}))}}))},i=function(e,t){let n,o,s,i;function r(e){return void 0===e.toString()[1]?"0"+e:e}function l(){const t=function(){const t=(new Date(e).getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60),s=Math.floor(t/60/60)%24;return{timeRemaining:t,days:Math.floor(t/60/60/24),hours:s,minutes:o,seconds:n}}();t.timeRemaining<0?(n.textContent="00",o.textContent="00",s.textContent="00",i.textContent="00"):(n.textContent=r(t.days),o.textContent=r(t.hours),s.textContent=r(t.minutes),i.textContent=r(t.seconds))}t?(n=document.querySelector(".count_1>span"),o=document.querySelector(".count_2>span"),s=document.querySelector(".count_3>span"),i=document.querySelector(".count_4>span")):(n=document.querySelectorAll(".count_1>span")[1],o=document.querySelectorAll(".count_2>span")[1],s=document.querySelectorAll(".count_3>span")[1],i=document.querySelectorAll(".count_4>span")[1]),l(),setInterval(l,1e3)};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const e=document.querySelector(".button"),t=document.querySelector(".overlay"),n=document.querySelector(".header-modal");document.body.addEventListener("click",(o=>{const s=o.target;s.classList.contains("header-modal__close")?(o.preventDefault(),n.style.display="none",t.style.display="none"):s.closest(".button")===e&&(n.style.display="block",t.style.display="block")}))})(),document.addEventListener("scroll",(()=>{const e=document.getElementById("offer").getBoundingClientRect().bottom;document.querySelector(".smooth-scroll").style.display=e<0?"block":"none"})),document.body.addEventListener("click",(e=>{const t=e.target,n=document.getElementById("header").getBoundingClientRect().top;t.closest(".smooth-scroll")===document.querySelector(".smooth-scroll")&&window.scrollBy({top:n,behavior:"smooth"})})),(()=>{const e=document.querySelector(".overlay"),t=document.querySelector(".services-modal");document.body.addEventListener("click",(n=>{const o=n.target;o.classList.contains("services-modal__close")?(n.preventDefault(),t.style.display="none",e.style.display="none"):null!==o.closest(".service-button")&&o.closest(".service-button").classList.contains("service-button")&&(t.style.display="block",e.style.display="block")}))})(),(()=>{let e;const t=document.querySelectorAll(".services-item"),n=document.querySelector("#services");let o=0,s=1;const i=(e,t,n)=>{e[t].classList.remove(n)},r=(e,t,n)=>{e[t].classList.add(n)};if(document.body.clientWidth>576)e=!0;else if(e=!1,document.querySelector(".services-item-active-2")){document.querySelector(".services-item-active-2").classList.remove("services-item-active-2");const e=document.createElement("style");e.textContent="\n            .services-item {\n                -webkit-transform: translate(-50%,-50%);\n                transform: translate(-50%,-50%);\n            }",document.head.appendChild(e)}window.addEventListener("resize",(()=>{document.body.clientWidth>576?(e=!0,console.log(e)):(e=!1,document.querySelector(".services-item-active-2")&&document.querySelector(".services-item-active-2").classList.remove("services-item-active-2"))})),n.addEventListener("click",(n=>{n.preventDefault();const l=n.target;null!==l.closest(".services__arrow")&&(i(t,o,"services-item-active-1"),e&&i(t,s,"services-item-active-2"),l.closest(".services__arrow")===document.querySelector(".services__arrow--right")?(o++,e&&s++):l.closest(".services__arrow")===document.querySelector(".services__arrow--left")&&(o--,e&&s--),o>=t.length&&(o=0),e&&s>=t.length&&(s=0),o<0&&(o=t.length-1),e&&s<0&&(s=t.length-1),r(t,o,"services-item-active-1"),e&&r(t,s,"services-item-active-2"))}))})(),(()=>{const e=document.querySelector("#calc-type"),t=document.querySelector("#calc"),n=document.querySelector("#calc-input"),o=document.querySelector("#calc-type-material"),s=document.getElementById("calc-total");if(t){n.addEventListener("input",(()=>{n.value=n.value.replace(/[^0-9]/,"")}));const i=()=>{let t=0;o.value&&e.value&&(t=Math.ceil(o.value*e.value*n.value)),s.value=t};t.addEventListener("change",(e=>{const t=e.target;(t.matches("select")||t.matches("input"))&&i()}))}})(),s(document.querySelector("#form1")),s(document.querySelector("#form2"));const e=new Date;i(`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()+2}`,!0),i(`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()+2}`,!1),new class{constructor({main:e,wrap:t,next:n,prev:o,infinity:s=!1,position:i=0,slidesToShow:r=3,responsive:l=[]}){this.main=document.querySelector(e),this.wrap=document.querySelector(t),o&&n&&(this.next=document.querySelector(n),this.prev=document.querySelector(o)),this.slidesToShow=r,this.slides=document.querySelector(t).children,this.options={position:i,infinity:s,widthSlide:Math.floor(100/this.slidesToShow),maxPosition:this.slides.length-this.slidesToShow},this.responsive=l}init(){this.addClass(),this.addStyles(),this.prev&&this.next||this.addArrow(),this.controlSlider(),this.responseInit()}addClass(){this.main.classList.add("glo-slider"),this.wrap.classList.add("glo-slider__wrap");for(const e of this.slides)e.classList.add("glo-slider__item")}controlSlider(){this.prev.addEventListener("click",this.prevSlider.bind(this)),this.next.addEventListener("click",this.nextSlider.bind(this))}prevSlider(){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.options.maxPosition),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}nextSlider(){(this.options.infinity||this.options.position<this.options.maxPosition)&&(++this.options.position,this.options.position>this.options.maxPosition&&(this.options.position=0),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}addArrow(){this.prev=document.createElement("button"),this.next=document.createElement("button"),this.prev.className="glo-slider__prev",this.next.className="glo-slider__next",this.main.appendChild(this.prev),this.main.appendChild(this.next);const e=document.createElement("style");e.textContent="\n        .glo-slider__next{\n            margin: 0 10px;\n            border:20px solid transparent;\n            background: transparent;\n            border-left-color: #19bbff\n        }        \n        .glo-slider__prev{\n            margin: 0 10px;\n            border:20px solid transparent;\n            background: transparent;\n            border-right-color: #19b5fe;\n        }\n        .glo-slider__prev:hover,\n        .glo-slider__next:hover,\n        .glo-slider__prev:focus,\n        .glo-slider__next:focus{\n            background: transparent;\n            outline: transparent;\n        }\n        ",document.head.appendChild(e)}addStyles(){let e=document.createElement("style");e||(e=document.createElement("style"),e.id="sliderCarousel-style"),e.textContent=`\n        .glo-slider{\n            overflow: hidden !important;\n            max-width: 576px;\n            margin: 0 auto;\n        }\n        .glo-slider__wrap{\n            display: flex !important;\n            transition: transform 0.5s !important;\n            will-change: transform !important;\n        }\n        .glo-slider__item{\n            display: flex !important;\n            flex: 0 0 ${this.options.widthSlide}% !important;\n            width: ${this.options.widthSlide}% !important;\n            flex-direction: column;\n        }`,document.head.appendChild(e)}responseInit(){const e=this.slidesToShow,t=this.responsive.map((e=>e.breakpoint)),n=Math.max(...t);window.addEventListener("resize",(()=>{const o=document.documentElement.clientWidth;if(o<n)for(let e=0;e<t.length;e++)o<t[e]&&(this.slidesToShow=this.responsive[e].slideToShow,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyles());else this.slidesToShow=e,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyles()}))}}({main:".benefits-inner",wrap:".benefits-wrap",infinity:!0,slidesToShow:3,next:".benefits__arrow--right",prev:".benefits__arrow--left",responsive:[{breakpoint:576,slideToShow:1}]}).init()}))})();