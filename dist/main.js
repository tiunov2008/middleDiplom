(()=>{"use strict";let t=!1;class e{constructor({selector:t,pattern:e,method:n}){this.form=document.querySelector(t),this.pattern=e,this.method=n,this.elementsForm=[...this.form.elements].filter((t=>"button"!==t.tagName.toLowerCase()&&"button"!==t.type&&"hidden"!==t.type)),this.error=new Set}init(){this.applyStyle(),this.setPattern(),this.elementsForm.forEach((t=>t.addEventListener("change",this.checkIt.bind(this)))),this.form.addEventListener("submit",(e=>{if(this.elementsForm.forEach((t=>this.checkIt({target:t}))),this.error.size)return e.preventDefault(),void(t=!0);t=!1,this.elementsForm.forEach((t=>t.classList.remove("success")))}))}isValid(t){const e={notEmpty:t=>""!==t.value.trim(),pattern:(t,e)=>e.test(t.value)};if(!this.method)return console.warn("Передайте методы"),!0;{const n=this.method[t.id];if(n)return n.every((n=>e[n[0]](t,this.pattern[n[1]])))}}checkIt(t){const e=t.target;this.isValid(e)?(this.showSuccess(e),this.error.delete(e)):(this.showError(e),this.error.add(e))}showError(t){if(t.classList.remove("success"),t.classList.add("error"),t.nextElementSibling&&t.nextElementSibling.classList.contains("validator-error"))return;const e=document.createElement("div");e.textContent="Ошибка в этом поле",e.classList.add("validator-error"),t.insertAdjacentElement("afterend",e)}showSuccess(t){t.classList.remove("error"),t.classList.add("success"),t.nextElementSibling&&t.nextElementSibling.classList.contains("validator-error")&&t.nextElementSibling.remove()}applyStyle(){const t=document.createElement("style");t.textContent="\n        input.success {\n            border: 2px solid green !important;\n        }\n        input.error {\n            border: 2px solid red !important;\n        }\n        .validator-error {\n            font-size: 14px !important;\n            color: red !important;\n            font-family: sans-serif !important;\n        }\n        ",document.head.appendChild(t)}setPattern(){this.pattern.phone||(this.pattern.phone=/^\+?[78]([-()]*\d){10}$/),this.pattern.email||(this.pattern.email=/^\w+@+\w+\.\w{2,}$/)}}const n=new e({selector:"#form1",pattern:{name:/[A-Za-zА-Яа-яЁё]{2,}/,phone:/^((8|\+7)[- ]?)?(\(?\d{3}\)?[- ]?)?[\d\- ]{7,16}$/},method:{"form1-name":[["notEmpty"],["pattern","name"]],"form1-phone":[["notEmpty"],["pattern","phone"]]}}),o=new e({selector:"#form2",pattern:{name:/[A-Za-zА-Яа-яЁё]{2,}/,phone:/^((8|\+7)[- ]?)?(\(?\d{3}\)?[- ]?)?[\d\- ]{7,16}$/},method:{"form2-name":[["notEmpty"],["pattern","name"]],"form2-phone":[["notEmpty"],["pattern","phone"]]}});n.init(),o.init();const s=e=>{[...e.elements].filter((t=>"button"!==t.tagName.toLowerCase()&&"button"!==t.type)).forEach((t=>{t.addEventListener("input",(()=>{"fio"===t.name?t.value=t.value.replace(/[^а-яё a-z]/gi,""):"phone"===t.name&&(t.value=t.value.replace(/[^0-9()+-]/,""))}))}));const n=document.createElement("div");n.style.cssText="font-size: 1.5rem; color: #000 !important;",e.addEventListener("submit",(o=>{if(o.preventDefault(),!t){e.querySelector("button").disabled="true",e.appendChild(n),n.textContent="Загрузка...";const t=new FormData(e),o={};for(const e of t.entries())o[e[0]]=e[1];(t=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}))(o).then((t=>{if(200!==t.status)throw new Error("Status network not 200");n.textContent="Спасибо! Мы скоро с вами свяжимся!",setTimeout((()=>{n.remove(),e.querySelector("button").removeAttribute("disabled")}),3e3),e.reset()})).catch((t=>{n.textContent="Что то пошло не так...",setTimeout((()=>{n.remove(),e.querySelector("button").removeAttribute("disabled")}),3e3),e.reset()}))}}))},i=function(t,e){let n,o,s,i;function r(t){return void 0===t.toString()[1]?"0"+t:t}function l(){const e=function(){const e=(new Date(t).getTime()-(new Date).getTime())/1e3,n=Math.floor(e%60),o=Math.floor(e/60%60),s=Math.floor(e/60/60)%24;return{timeRemaining:e,days:Math.floor(e/60/60/24),hours:s,minutes:o,seconds:n}}();e.timeRemaining<0?(n.textContent="00",o.textContent="00",s.textContent="00",i.textContent="00"):(n.textContent=r(e.days),o.textContent=r(e.hours),s.textContent=r(e.minutes),i.textContent=r(e.seconds))}e?(n=document.querySelector(".count_1>span"),o=document.querySelector(".count_2>span"),s=document.querySelector(".count_3>span"),i=document.querySelector(".count_4>span")):(n=document.querySelectorAll(".count_1>span")[1],o=document.querySelectorAll(".count_2>span")[1],s=document.querySelectorAll(".count_3>span")[1],i=document.querySelectorAll(".count_4>span")[1]),l(),setInterval(l,1e3)};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=document.querySelector(".button"),e=document.querySelector(".overlay"),n=document.querySelector(".header-modal");document.body.addEventListener("click",(o=>{const s=o.target;s.classList.contains("header-modal__close")?(o.preventDefault(),n.style.display="none",e.style.display="none"):s.closest(".button")===t&&(n.style.display="block",e.style.display="block")}))})(),document.addEventListener("scroll",(()=>{const t=document.getElementById("offer").getBoundingClientRect().bottom;document.querySelector(".smooth-scroll").style.display=t<0?"block":"none"})),document.body.addEventListener("click",(t=>{const e=t.target,n=document.getElementById("header").getBoundingClientRect().top;e.closest(".smooth-scroll")===document.querySelector(".smooth-scroll")&&window.scrollBy({top:n,behavior:"smooth"})})),(()=>{const t=document.querySelector(".overlay"),e=document.querySelector(".services-modal");document.body.addEventListener("click",(n=>{const o=n.target;o.classList.contains("services-modal__close")?(n.preventDefault(),e.style.display="none",t.style.display="none"):null!==o.closest(".service-button")&&o.closest(".service-button").classList.contains("service-button")&&(e.style.display="block",t.style.display="block")}))})(),s(document.querySelector("#form1")),s(document.querySelector("#form2"));const t=new Date;i(`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()+2}`,!0),i(`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()+2}`,!1),new class{constructor({main:t,wrap:e,next:n,prev:o,infinity:s=!1,position:i=0,slidesToShow:r=3,responsive:l=[]}){this.main=document.querySelector(t),this.wrap=document.querySelector(e),o&&n&&(this.next=document.querySelector(n),this.prev=document.querySelector(o)),this.slidesToShow=r,this.slides=document.querySelector(e).children,this.options={position:i,infinity:s,widthSlide:Math.floor(100/this.slidesToShow),maxPosition:this.slides.length-this.slidesToShow},this.responsive=l}init(){this.addClass(),this.addStyles(),this.prev&&this.next||this.addArrow(),this.controlSlider(),this.responseInit()}addClass(){this.main.classList.add("glo-slider"),this.wrap.classList.add("glo-slider__wrap");for(const t of this.slides)t.classList.add("glo-slider__item")}controlSlider(){this.prev.addEventListener("click",this.prevSlider.bind(this)),this.next.addEventListener("click",this.nextSlider.bind(this))}prevSlider(){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.options.maxPosition),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}nextSlider(){(this.options.infinity||this.options.position<this.options.maxPosition)&&(++this.options.position,this.options.position>this.options.maxPosition&&(this.options.position=0),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}addArrow(){this.prev=document.createElement("button"),this.next=document.createElement("button"),this.prev.className="glo-slider__prev",this.next.className="glo-slider__next",this.main.appendChild(this.prev),this.main.appendChild(this.next);const t=document.createElement("style");t.textContent="\n        .glo-slider__next{\n            margin: 0 10px;\n            border:20px solid transparent;\n            background: transparent;\n            border-left-color: #19bbff\n        }        \n        .glo-slider__prev{\n            margin: 0 10px;\n            border:20px solid transparent;\n            background: transparent;\n            border-right-color: #19b5fe;\n        }\n        .glo-slider__prev:hover,\n        .glo-slider__next:hover,\n        .glo-slider__prev:focus,\n        .glo-slider__next:focus{\n            background: transparent;\n            outline: transparent;\n        }\n        ",document.head.appendChild(t)}addStyles(){let t=document.createElement("style");t||(t=document.createElement("style"),t.id="sliderCarousel-style"),t.textContent=`\n        .glo-slider{\n            overflow: hidden !important;\n            max-width: 576px;\n            margin: 0 auto;\n        }\n        .glo-slider__wrap{\n            display: flex !important;\n            transition: transform 0.5s !important;\n            will-change: transform !important;\n        }\n        .glo-slider__item{\n            display: flex !important;\n            flex: 0 0 ${this.options.widthSlide}% !important;\n            width: ${this.options.widthSlide}% !important;\n            flex-direction: column;\n        }`,document.head.appendChild(t)}responseInit(){const t=this.slidesToShow,e=this.responsive.map((t=>t.breakpoint)),n=Math.max(...e);window.addEventListener("resize",(()=>{const o=document.documentElement.clientWidth;if(o<n)for(let t=0;t<e.length;t++)o<e[t]&&(this.slidesToShow=this.responsive[t].slideToShow,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyles());else this.slidesToShow=t,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyles()}))}}({main:".benefits-inner",wrap:".benefits-wrap",infinity:!0,slidesToShow:3,next:".benefits__arrow--right",prev:".benefits__arrow--left",responsive:[{breakpoint:576,slideToShow:1}]}).init()}))})();